<?xml version="1.0"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<!-- Created with XMetaL (http://www.xmetal.com) -->
<concept id="concept_87701FF3FAE74F3193BE3FB349CE0086"> 
  <title>Extending the Pdx Autoserializer</title> 
  <shortdesc>This example code demonstrates how to extend the autoserializer to
	 customize serialization.
  </shortdesc> 
  <conbody>
	 <example id="example_C2A02EF7DFDD4459B1A292E0071FB9A3">
		<title>Extending the Autoserializer</title>
		<codeblock>public class AutoSerializerEx : ReflectionBasedAutoSerializer
{
public override object WriteTransform(FieldInfo fi, Type type, object originalValue)
{
if (fi.FieldType.Equals(Type.GetType("System.Guid")))
{
return originalValue.ToString();
}
else if (fi.FieldType.Equals(Type.GetType("System.Decimal")))
{
return originalValue.ToString();
}
else
return base.WriteTransform(fi, type, originalValue);
}
public override object ReadTransform(FieldInfo fi, Type type, object serializeValue)
{
if (fi.FieldType.Equals(Type.GetType("System.Guid")))
{
Guid g = new Guid((string)serializeValue);
return g;
}
else if (fi.FieldType.Equals(Type.GetType("System.Decimal")))
{
return Convert.ToDecimal((string)serializeValue);
}
else
return base.ReadTransform(fi, type, serializeValue);
}
public override FieldType GetFieldType(FieldInfo fi, Type type)
{
if (fi.FieldType.Equals(Type.GetType("System.Guid")) || fi.FieldType.Equals(Type.GetType("System.Decimal")))
return FieldType.STRING;
return base.GetFieldType(fi, type);
}
public override bool IsIdentityField(FieldInfo fi, Type type)
{
if (fi.Name == "_identityField")
return true;
return base.IsIdentityField(fi, type);
}
public override string GetFieldName(FieldInfo fi, Type type)
{
if (fi.Name == "_nameChange")
return fi.Name + "NewName";
 
return fi.Name ;
}
 
public override bool IsFieldIncluded(FieldInfo fi, Type type)
{
if (fi.Name == "_notInclude")
return false;
return base.IsFieldIncluded(fi, type);
}
}</codeblock>
	 </example>
  </conbody> 
</concept>
